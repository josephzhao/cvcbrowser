
<div style="padding:10px; margin-top:10px;">

    {% if entities is defined and entities != null %}
        {% set count = 0%}
        {% for indicatorbenefitimage in entities.indicatorbenefitimages %}
            {% set images=indicatorbenefitimage.getFileName()|unserialize %}
            {% if count ==0 %}
                {% set images_array = {id:indicatorbenefitimage.getId(),images:images} %}
            {% else %}
                {% set images_array = images_array|merge({id:indicatorbenefitimage.getId(),images:images}) %}
            {% endif %}
            {% set count = count + images|length %}
        {% endfor %}               
        <h4>{{entities.indicator.name|upper}}</h4>
        <h4>
            {{entities.title|title}}
        </h4>
        <div>
            <p> -- {{entities.benefitName}}</p>
        </div>
        <div>
            {% if count > 1 %}
                <div id="leftsidebar_indicator_benefit_{{entities.id}}" class="carousel slide" style=" border:1px solid background;border-radius: 5px;">
                    <ol class="carousel-indicators">
                        {% set i=0 %}
                        {% for indicatorbenefitimage in entities.indicatorbenefitimages %}
                            {% set images=indicatorbenefitimage.getFileName()|unserialize %}
                            {% if images|length > 0 %}
                                {% for image in images %}
                                    <li data-target="#leftsidebar_indicator_benefit_{{entities.id}}" data-slide-to="{{i}}" {% if i==0 %} class="active" {% endif %}>
                                    </li>
                                    {% set i=i+1 %}
                                {% endfor %}
                            {% endif %}
                        {% endfor %}
                    </ol>
                    <div class="carousel-inner" style="border-radius: 5px;">
                        {% set i=0 %}
                        {% for indicatorbenefitimage in entities.indicatorbenefitimages %}
                            {% set images=indicatorbenefitimage.getFileName()|unserialize %}
                            {% if images|length > 0 %}

                                {% for image in images %}
                                    <div style="border-radius: 5px;" class="item {% if i==0%} active {% endif %}" >
                                        <img style="border-radius: 5px;width:300px;height:200px;overflow: hidden;" src="{{ asset('uploads/images/indicatorbenefitimages/'~indicatorbenefitimage.id~"/")}}{{image|raw}}" width="100%">
                                        <div class="carousel-caption">
                                            <h5>{{indicatorbenefitimage.getImageTitle()}}</h5>
                                            <p>{{indicatorbenefitimage.getImageCaption()}}</p>
                                        </div>
                                    </div>
                                    {% set i=i+1 %}
                                {% endfor %}

                            {% endif %}
                        {% endfor %}
                    </div>
                    <a class="left carousel-control" href="#leftsidebar_indicator_benefit_{{entities.id}}" data-slide="prev">‹</a>
                    <a class="right carousel-control" href="#leftsidebar_indicator_benefit_{{entities.id}}" data-slide="next">›</a>
                </div>
            {% else %}
                {% if count == 1 %}
                    <div style="border-radius: 5px;">
                        <img style="border-radius: 5px;width:300px;height:200px;overflow: hidden;" src="{{ asset('uploads/images/indicatorbenefitimages/'~images_array.id~"/")}}{{images_array.images[0]|raw}}" width="100%">
                    </div>
                {% endif %}
            {% endif %}
        </div>
        <div style="margin-top:15px;">
            
            <p> -- {{entities.abstract}}</p>
        </div>
        <script>
            $(function () {
                $('#leftsidebar_indicator_benefit_{{entities.id}}').carousel({
                    interval: 2000
                });
            });
        </script>
    {% endif %}
    {% if story is defined and story  != null %}
        {% set images=story.getImageFile()|unserialize %}
        <h4>
            {{story.storyName|title}}
        </h4>
        
        <div>
            {% if images|length > 1 %}
                <div id="leftsidebar_story_{{story.id}}" class="carousel slide" style=" border:1px solid background;border-radius: 5px;">
                    <ol class="carousel-indicators">
                        {% set i=0 %}
                        {% for image in images %}
                            <li data-target="#leftsidebar_story_{{story.id}}" data-slide-to="{{i}}" {% if i==0 %} class="active" {% endif %}>
                            </li>
                            {% set i=i+1 %}
                        {% endfor %}
                    </ol>
                    <div class="carousel-inner" style="border-radius: 5px;">
                        {% set i=0 %}
                        {% for image in images %}
                            <div style="border-radius: 5px;" class="item {% if i==0%} active {% endif %}" >
                                <img style="border-radius: 5px;width:300px;height:200px;overflow: hidden;" src="{{ asset('uploads/stories/'~story.id~'/images/')}}{{image|raw}}" width="100%">
                                <div class="carousel-caption">
                                </div>
                            </div>
                            {% set i=i+1 %}
                        {% endfor %}
                    </div>
                    <a class="left carousel-control" href="#leftsidebar_story_{{story.id}}" data-slide="prev">‹</a>
                    <a class="right carousel-control" href="#leftsidebar_story_{{story.id}}" data-slide="next">›</a>
                </div>
            {% else %}
                {% if images|length > 0 %}
                    <div style="border-radius: 5px;">
                        <img style="border-radius: 5px;width:300px;height:200px;overflow: hidden;" src="{{ asset('uploads/stories/'~story.id~'/images/')}}{{images[0]|raw}}" width="100%">
                    </div>
                {% endif %}
            {% endif %}
        </div>
        <div style="margin-top:10px;">
            <b>Summary:</b>
            <p> -- {{story.summary}}</p>
        </div>
        {% if story.storyFile %}
            <div style="margin-top:10px;">
                <object data="{{ asset('uploads/stories/'~story.id~'/pdf/')}}{{story.storyFile}}" type="application/pdf" width="300" height="300">
                    alt : <a href="{{ asset('uploads/stories/'~story.id~'/pdf/')}}{{story.storyFile}}">test.pdf</a>
                </object>
            </div>
        {% endif %}
        <script>
            $(function () {
                $('#leftsidebar_story_{{story.id}}').carousel({
                    interval: 2000
                });
            });
        </script>
    {% endif %}
</div>
