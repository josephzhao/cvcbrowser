

{% set images=story.getImageFile()|unserialize %}
<h4>
    <a href="{{path('homepage_storydetail',{id:story.id})}}" target="_blank">{{story.storyName|title}}</a>
</h4>
<div>
    {% if images|length > 1 %}
        <div id="leftsidebar_story_{{story.id}}" class="carousel slide" style=" border:1px solid background;border-radius: 5px;">
            <ol class="carousel-indicators">
                {% for image in images %}
                    <li data-target="#leftsidebar_story_{{story.id}}" data-slide-to="{{loop.index-1}}" {% if loop.index==1 %} class="active" {% endif %}>
                    </li>
                {% endfor %}
            </ol>
            <div class="carousel-inner" style="border-radius: 5px;">
                {% for image in images %}
                    <div style="border-radius: 5px;" class="item {% if loop.index==1%} active {% endif %}" >
                        {% autoescape 'html' %}
                            <img style="border-radius: 5px;width:300px;height:200px;overflow: hidden;" src="{{ asset('uploads/stories/'~story.id~'/images/')}}{{image}}" width="100%">
                        {% endautoescape %}
                        <div class="carousel-caption">
                        </div>
                    </div>
                {% endfor %}
            </div>
            <a class="left carousel-control"  data-slide="prev">‹</a>
            <a class="right carousel-control"  data-slide="next">›</a>
        </div>
    {% else %}
        {% if images|length > 0 %}
            <div style="border-radius: 5px;">
                {% autoescape 'html' %}
                    <img style="border-radius: 5px;width:300px;height:200px;overflow: hidden;" src="{{ asset('uploads/stories/'~story.id~'/images/')}}{{images[0]}}" width="100%">
                {% endautoescape %}
            </div>
        {% endif %}
    {% endif %}
</div>
<div style="margin-top:15px;">
    {#<b>Summary:</b>#}
    <p> -- {{story.summary}}</p>
    <p><a href="{{path('homepage_storydetail',{id:story.id})}}" target="_blank">Learn more...</a></p>

</div>
{% if story.storyText %}
    <div style="margin-top:10px;" id="pdf_display">
        {% autoescape 'html' %}
            {{story.storyText}}
        {% endautoescape %}
        {#                <a class="media" href="{{app.request.getSchemeAndHttpHost()}}/uploads/stories/{{story.id}}/pdf/{{story.storyFile}}">PDF File</a> #}
    </div>
{% endif %}
{% if story.storyFileType == 'text/html' %}
    <div style="margin-top:10px;" id="pdf_display">
        {% autoescape 'html' %}
            {{story.storyFile}}
        {% endautoescape %}
        {#                <a class="media" href="{{app.request.getSchemeAndHttpHost()}}/uploads/stories/{{story.id}}/pdf/{{story.storyFile}}">PDF File</a> #}
    </div>
{% endif %}
<script>
    $(function () {
        $('#leftsidebar_story_{{story.id}}').carousel({
            interval: 4000
        });

        $('#leftsidebar_indicator_benefit_flash').carousel({
            interval: 4000
        });
        $('#leftsidebar_story_{{story.id}} .carousel-control').unbind("click");
        $('#leftsidebar_story_{{story.id}} .carousel-control').click(function (e) {
            e.stopPropagation();
            $('#leftsidebar_story_{{story.id}}').carousel($(this).data('slide'));
        });

        $('#leftsidebar_story_{{story.id}} .carousel-indicators li').unbind("click");
        $('#leftsidebar_story_{{story.id}} .carousel-indicators li').click(function (e) {
            e.stopPropagation();
            $('#leftsidebar_story_{{story.id}}').carousel($(this).data('slide-to'));
        });
    });
</script>
